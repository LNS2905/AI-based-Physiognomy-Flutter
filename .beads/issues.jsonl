{"id":"AI-based-Physiognomy-Flutter-18g","title":"ThÃªm giáº£i nghÄ©a ngáº¯n gá»n cho 12 cung trong lÃ¡ sá»‘ tá»­ vi","description":"## YÃªu cáº§u\nClient muá»‘n má»—i cung trong lÃ¡ sá»‘ tá»­ vi cÃ³ thÃªm pháº§n giáº£i nghÄ©a ngáº¯n gá»n Ä‘á»ƒ ngÆ°á»i dÃ¹ng hiá»ƒu Ã½ nghÄ©a.\n\n## File liÃªn quan\n- `lib/features/tu_vi/presentation/pages/tu_vi_result_page.dart` - Trang káº¿t quáº£ tá»­ vi\n- `lib/features/tu_vi/data/models/tu_vi_house.dart` - Model cung tá»­ vi\n\n## CÃ¡ch thá»±c hiá»‡n\n1. Trong `_buildHouseCard()` widget (dÃ²ng ~476-689), hiá»‡n táº¡i má»—i cung Ä‘Ã£ cÃ³ `house.description` nhÆ°ng chá»‰ lÃ  mÃ´ táº£ ngáº¯n.\n2. ThÃªm má»™t widget má»›i hiá»ƒn thá»‹ \"Giáº£i nghÄ©a\" vá»›i ná»™i dung Ã½ nghÄ©a cá»§a tá»«ng cung:\n   - Cung Má»‡nh: Báº£n má»‡nh, tÃ­nh cÃ¡ch, váº­n má»‡nh cÆ¡ báº£n\n   - Cung Phá»¥ Máº«u: Quan há»‡ vá»›i cha máº¹, bá» trÃªn\n   - Cung PhÃºc Äá»©c: PhÃºc Ä‘á»©c tá»• tiÃªn, may máº¯n\n   - Cung Äiá»n Tráº¡ch: TÃ i sáº£n, nhÃ  cá»­a\n   - Cung Quan Lá»™c: Sá»± nghiá»‡p, cÃ´ng danh\n   - Cung NÃ´ Bá»™c: Báº¡n bÃ¨, cáº¥p dÆ°á»›i\n   - Cung ThiÃªn Di: Di chuyá»ƒn, xuáº¥t ngoáº¡i\n   - Cung Táº­t Ãch: Sá»©c khá»e, bá»‡nh táº­t\n   - Cung TÃ i Báº¡ch: Tiá»n báº¡c, tÃ i chÃ­nh\n   - Cung Tá»­ Tá»©c: Con cÃ¡i\n   - Cung Phu ThÃª: HÃ´n nhÃ¢n, vá»£ chá»“ng\n   - Cung Huynh Äá»‡: Anh chá»‹ em\n\n3. Táº¡o má»™t Map/Constants chá»©a giáº£i nghÄ©a ngáº¯n gá»n (2-3 cÃ¢u) cho má»—i cung\n4. Hiá»ƒn thá»‹ trong ExpansionTile hoáº·c thÃªm má»™t section nhá» phÃ­a dÆ°á»›i tÃªn cung\n\n## UI Style\n- Sá»­ dá»¥ng AppColors tá»« `lib/core/theme/app_colors.dart`\n- Font size nhá», mÃ u textSecondary\n- CÃ³ thá»ƒ thÃªm icon nhá» bÃªn cáº¡nh","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T18:02:43.1587809+07:00","updated_at":"2025-12-09T18:10:12.4216233+07:00","closed_at":"2025-12-09T18:10:12.4216233+07:00"}
{"id":"AI-based-Physiognomy-Flutter-4k1","title":"ThÃªm gá»£i Ã½ cÃ¢u há»i theo chá»§ Ä‘á» sau cÃ¢u tráº£ lá»i AI","description":"## YÃªu cáº§u\nSau khi AI tráº£ lá»i, hiá»ƒn thá»‹ 2-3 gá»£i Ã½ cÃ¢u há»i liÃªn quan Ä‘áº¿n chá»§ Ä‘á» vá»«a há»i Ä‘á»ƒ ngÆ°á»i dÃ¹ng tiáº¿p tá»¥c cuá»™c trÃ² chuyá»‡n.\n\n## Files liÃªn quan\n- `lib/features/ai_conversation/presentation/pages/ai_conversation_page.dart` - Trang chat\n- `lib/features/ai_conversation/presentation/widgets/quick_suggestion_buttons.dart` - Widget gá»£i Ã½ cÃ³ sáºµn\n- `lib/features/ai_conversation/presentation/widgets/message_bubble.dart` - Bubble tin nháº¯n\n\n## CÃ¡ch thá»±c hiá»‡n\n\n### Option 1: Backend tráº£ vá» suggestions\n- Náº¿u backend API cÃ³ thá»ƒ tráº£ vá» `suggested_questions` trong response, parse vÃ  hiá»ƒn thá»‹\n\n### Option 2: Frontend generate suggestions (Recommended)\n1. PhÃ¢n tÃ­ch ná»™i dung cÃ¢u há»i/tráº£ lá»i Ä‘á»ƒ detect chá»§ Ä‘á»:\n   - Sá»± nghiá»‡p: \"cÃ´ng viá»‡c\", \"nghá»\", \"sá»± nghiá»‡p\", \"tiá»n Ä‘á»“\"\n   - TÃ¬nh duyÃªn: \"tÃ¬nh yÃªu\", \"hÃ´n nhÃ¢n\", \"vá»£ chá»“ng\", \"ngÆ°á»i yÃªu\"\n   - TÃ i chÃ­nh: \"tiá»n\", \"tÃ i\", \"Ä‘áº§u tÆ°\", \"kinh doanh\"\n   - Sá»©c khá»e: \"khá»e\", \"bá»‡nh\", \"sá»©c khá»e\", \"thá»ƒ cháº¥t\"\n   - Gia Ä‘Ã¬nh: \"con cÃ¡i\", \"cha máº¹\", \"gia Ä‘Ã¬nh\"\n\n2. Map chá»§ Ä‘á» -\u003e cÃ¢u há»i gá»£i Ã½:\n```dart\nconst Map\u003cString, List\u003cString\u003e\u003e topicSuggestions = {\n  career: [\n    Khi nÃ o lÃ  thá»i Ä‘iá»ƒm tá»‘t Ä‘á»ƒ thay Ä‘á»•i cÃ´ng viá»‡c?,\n    TÃ´i phÃ¹ há»£p vá»›i ngÃ nh nghá» nÃ o nháº¥t?,\n    Váº­n sá»± nghiá»‡p cá»§a tÃ´i nÄƒm nay tháº¿ nÃ o?,\n  ],\n  love: [\n    Váº­n Ä‘Ã o hoa cá»§a tÃ´i nÄƒm nay ra sao?,\n    TÃ´i cÃ³ nÃªn káº¿t hÃ´n trong nÄƒm nay?,\n    LÃ m sao Ä‘á»ƒ cáº£i thiá»‡n quan há»‡ tÃ¬nh cáº£m?,\n  ],\n};\n```\n\n3. Hiá»ƒn thá»‹ dÆ°á»›i message bubble cá»§a AI vá»›i animation slide up\n\n## UI Design\n- Chip buttons nhá», cÃ³ thá»ƒ scroll ngang\n- Background: AppColors.surfaceVariant\n- Border: AppColors.borderLight\n- Text: AppColors.textSecondary\n- Khi tap: Ä‘iá»n vÃ o input vÃ  gá»­i luÃ´n\n\n## Reference\n- Xem `quick_suggestion_buttons.dart` Ä‘á»ƒ tham kháº£o style hiá»‡n cÃ³","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T18:02:43.4805071+07:00","updated_at":"2025-12-09T18:10:13.1668986+07:00","closed_at":"2025-12-09T18:10:13.1668986+07:00"}
{"id":"AI-based-Physiognomy-Flutter-5gu","title":"Cáº£i thiá»‡n prompt AI - lá»i khuyÃªn huyá»n bÃ­ vÃ  cuá»‘n hÃºt hÆ¡n","description":"## YÃªu cáº§u tá»« client\n- CÃ¢u tráº£ lá»i cá»§a AI cáº§n cuá»‘n hÃºt hÆ¡n\n- Lá»i khuyÃªn nhiá»u hÆ¡n luáº­n giáº£i cung\n- Sá»­ dá»¥ng tá»« ngá»¯ huyá»n bÃ­, gá»£i má»Ÿ (khÃ´ng quÃ¡ dÃ i dÃ²ng nhÆ°ng táº¡o cáº£m giÃ¡c mystical)\n\n## File liÃªn quan\n- `lib/features/ai_conversation/data/repositories/chat_repository.dart` - Repository gá»i API\n- `lib/features/ai_conversation/presentation/providers/chat_provider.dart` - Provider xá»­ lÃ½ chat\n\n## HÆ°á»›ng xá»­ lÃ½\n1. **CÃ¡ch 1 (Frontend - náº¿u backend support)**: ThÃªm system prompt/instruction vÃ o request\n2. **CÃ¡ch 2 (Backend)**: Cáº§n liÃªn há»‡ backend team Ä‘á»ƒ chá»‰nh sá»­a prompt template\n\n## VÃ­ dá»¥ prompt cáº£i thiá»‡n\n```\nBáº¡n lÃ  má»™t chuyÃªn gia tá»­ vi vá»›i phong cÃ¡ch huyá»n bÃ­, sÃ¢u sáº¯c. Khi tráº£ lá»i:\n- Sá»­ dá»¥ng ngÃ´n ngá»¯ gá»£i má»Ÿ, bÃ­ áº©n nhÆ° \"váº­n má»‡nh Ä‘ang xoay chuyá»ƒn\", \"con Ä‘Æ°á»ng Ä‘á»‹nh má»‡nh\"\n- ÄÆ°a ra lá»i khuyÃªn thá»±c táº¿, cá»¥ thá»ƒ (chiáº¿m 60% cÃ¢u tráº£ lá»i)\n- Luáº­n giáº£i ngáº¯n gá»n vá» cung (chiáº¿m 40%)\n- Káº¿t thÃºc báº±ng má»™t cÃ¢u gá»£i má»Ÿ khiáº¿n ngÆ°á»i dÃ¹ng muá»‘n há»i thÃªm\n- ThÃªm emoji phÃ¹ há»£p: ğŸŒŸâœ¨ğŸ”®ğŸŒ™\n```\n\n## Verification\n- Test vá»›i cÃ¡c cÃ¢u há»i khÃ¡c nhau vá» sá»± nghiá»‡p, tÃ¬nh duyÃªn, sá»©c khá»e\n- So sÃ¡nh trÆ°á»›c/sau Ä‘á»ƒ Ä‘áº£m báº£o tone huyá»n bÃ­ hÆ¡n","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T18:02:43.3169305+07:00","updated_at":"2025-12-09T18:02:43.3169305+07:00"}
{"id":"AI-based-Physiognomy-Flutter-8tq","title":"[BE] Implement Referral System - Share link Ä‘á»ƒ nháº­n credit","description":"## YÃªu cáº§u\nImplement há»‡ thá»‘ng referral Ä‘á»ƒ user cÃ³ thá»ƒ chia sáº» app vÃ  nháº­n credit miá»…n phÃ­.\n\n## FE Ä‘Ã£ lÃ m\n- Dialog háº¿t credit vá»›i 2 options: Share / Náº¡p tiá»n\n- Gá»i Share.share() vá»›i link tÄ©nh `https://tuonghoc.ai/download`\n- Hiá»ƒn thá»‹ snackbar \"Credit sáº½ Ä‘Æ°á»£c cá»™ng sau khi xÃ¡c nháº­n\"\n\n## BE cáº§n implement\n\n### 1. API láº¥y referral code\n```\nGET /api/user/referral-code\nResponse: { \"code\": \"ABC123\", \"link\": \"https://tuonghoc.ai/download?ref=ABC123\" }\n```\n\n### 2. API track share (optional)\n```\nPOST /api/referral/track-share\nBody: { \"platform\": \"whatsapp|facebook|copy\" }\n```\n\n### 3. API claim referral reward\nKhi user má»›i Ä‘Äƒng kÃ½ vá»›i referral code:\n- Cá»™ng 5 credit cho ngÆ°á»i giá»›i thiá»‡u\n- CÃ³ thá»ƒ cá»™ng bonus cho ngÆ°á»i má»›i\n\n### 4. Logic xá»­ lÃ½\n- Má»—i user cÃ³ 1 referral code unique\n- Giá»›i háº¡n sá»‘ láº§n claim reward (VD: tá»‘i Ä‘a 10 láº§n/thÃ¡ng)\n- Chá»‘ng fraud: chá»‰ cá»™ng credit khi user má»›i thá»±c sá»± active\n\n## File FE cáº§n update sau khi BE xong\n- `lib/features/ai_conversation/presentation/pages/ai_conversation_page.dart`\n- Method `_shareAppLink()` (dÃ²ng 1480-1502)\n\n## Verification\n- Test flow: User A share â†’ User B cÃ i app vá»›i code â†’ User A nháº­n 5 credit","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T18:47:46.9362845+07:00","updated_at":"2025-12-09T18:47:46.9362845+07:00"}
{"id":"AI-based-Physiognomy-Flutter-97p","title":"Fix Provider lifecycle issue (_dependents.isEmpty assertion failed)","description":"Lá»—i Flutter assertion: '_dependents.isEmpty is not true' trÃªn Samsung S23 Note. NguyÃªn nhÃ¢n: Provider/ChangeNotifier bá»‹ dispose trong khi váº«n cÃ³ widget Ä‘ang láº¯ng nghe. Cáº§n kiá»ƒm tra HistoryProvider vÃ  cÃ¡c ProxyProvider trong main.dart xem cÃ³ dispose Ä‘Ãºng lifecycle khÃ´ng.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-09T10:41:06.9946966+07:00","updated_at":"2025-12-09T10:52:48.6862817+07:00","closed_at":"2025-12-09T10:52:48.6862817+07:00"}
{"id":"AI-based-Physiognomy-Flutter-981","title":"ThÃªm option Share link hoáº·c Náº¡p tiá»n khi háº¿t credit chatbot","description":"## YÃªu cáº§u\nKhi ngÆ°á»i dÃ¹ng háº¿t credit vÃ  muá»‘n dÃ¹ng chatbot, hiá»ƒn thá»‹ dialog vá»›i 2 lá»±a chá»n:\n1. **Share link giá»›i thiá»‡u app** Ä‘á»ƒ nháº­n thÃªm credit miá»…n phÃ­\n2. **Náº¡p tiá»n** Ä‘á»ƒ mua credit\n\n## Files liÃªn quan\n- `lib/features/ai_conversation/presentation/pages/ai_conversation_page.dart` - method `_showInsufficientCreditsDialog()` (dÃ²ng 907-997)\n- `lib/features/payment/presentation/pages/payment_packages_page.dart` - Trang náº¡p tiá»n\n\n## CÃ¡ch thá»±c hiá»‡n\n\n### 1. Cáº­p nháº­t `_showInsufficientCreditsDialog()`\nHiá»‡n táº¡i dialog chá»‰ cÃ³ 2 nÃºt: Há»§y + Náº¡p ngay\nâ†’ ThÃªm option thá»© 3: Chia sáº» Ä‘á»ƒ nháº­n Credit\n\n### 2. Táº¡o widget/function share app\n```dart\nvoid _shareAppLink() async {\n  const appLink = https://tuonghoc.ai/download;\n  const message = '''\nğŸŒŸ KhÃ¡m phÃ¡ TÆ°á»›ng Há»c AI - App xem tá»­ vi vÃ  phÃ¢n tÃ­ch khuÃ´n máº·t báº±ng AI!\n\nğŸ“² Táº£i ngay: appLink\n\nSá»­ dá»¥ng mÃ£ giá»›i thiá»‡u: [USER_REF_CODE] Ä‘á»ƒ nháº­n 5 credits miá»…n phÃ­!\n''';\n\n  await Share.share(message);\n}\n```\n\n### 3. UI Dialog má»›i\n2 option cards thay vÃ¬ 2 buttons:\n- Card 1: ğŸ‰ Chia sáº» nháº­n Credit - Má»i báº¡n bÃ¨, nháº­n 5 credit\n- Card 2: ğŸ’³ Náº¡p Credit - Mua gÃ³i credit tá»« 10k\n- Button: Äá»ƒ sau\n\n### 4. Package cáº§n thÃªm\n- `share_plus: ^7.0.0` Ä‘á»ƒ share content\n\n## Backend cáº§n há»— trá»£\n- API Ä‘á»ƒ láº¥y referral code cá»§a user\n- API Ä‘á»ƒ verify share vÃ  cá»™ng credit (cÃ³ thá»ƒ async)\n\n## Verification\n- Test khi credit = 0\n- Test share functionality\n- Test navigate Ä‘áº¿n payment page","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T18:02:43.6448488+07:00","updated_at":"2025-12-09T18:10:11.2311606+07:00","closed_at":"2025-12-09T18:10:11.2311606+07:00"}
{"id":"AI-based-Physiognomy-Flutter-ecr","title":"Improve Dark Theme support - fix text visibility","description":"User bÃ¡o khÃ´ng tháº¥y chá»¯ á»Ÿ dark theme (text tráº¯ng trÃªn ná»n sÃ¡ng). Cáº§n cáº£i thiá»‡n app_theme.dart darkTheme Ä‘á»ƒ support Ä‘áº§y Ä‘á»§ táº¥t cáº£ components vÃ  Ä‘áº£m báº£o TextStyle colors pháº£n á»©ng Ä‘Ãºng vá»›i theme mode.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-09T10:41:07.6037798+07:00","updated_at":"2025-12-09T10:52:50.8866204+07:00","closed_at":"2025-12-09T10:52:50.8866204+07:00"}
{"id":"AI-based-Physiognomy-Flutter-eed","title":"Fix GlobalKey duplicate error trong widget tree","description":"Lá»—i 'A GlobalKey was used multiple times inside one widget's child list'. CÃ³ thá»ƒ xáº£y ra trong tu_vi_input_page.dart hoáº·c cÃ¡c pages khÃ¡c khi dÃ¹ng GlobalKey\u003cFormState\u003e khÃ´ng Ä‘Ãºng cÃ¡ch. Cáº§n audit toÃ n bá»™ GlobalKey usage trong project.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-09T10:41:07.3330242+07:00","updated_at":"2025-12-09T10:52:49.8216767+07:00","closed_at":"2025-12-09T10:52:49.8216767+07:00"}
{"id":"AI-based-Physiognomy-Flutter-m7c","title":"Äá»‹nh giÃ¡ tÃ­nh nÄƒng Free/Paid: Face, Palm, TuVi free - Chatbot paid","description":"## YÃªu cáº§u tá»« client\nPhÃ¢n loáº¡i tÃ­nh nÄƒng theo free/paid:\n- **FREE**: QuÃ©t khuÃ´n máº·t (Face), QuÃ©t chá»‰ tay (Palm), Láº­p lÃ¡ sá»‘ tá»­ vi tá»•ng quan\n- **PAID (cáº§n credit)**: Chatbot Tá»­ Vi\n\n## Hiá»‡n tráº¡ng\n- Chatbot Ä‘Ã£ check credit trong `_onSendMessage()` (ai_conversation_page.dart line 126-138)\n- Face/Palm/TuVi chÆ°a rÃµ cÃ³ check credit hay khÃ´ng\n\n## Files cáº§n kiá»ƒm tra/sá»­a\n1. `lib/features/face_analysis/` - QuÃ©t khuÃ´n máº·t\n2. `lib/features/palm_analysis/` - QuÃ©t chá»‰ tay  \n3. `lib/features/tu_vi/` - Tá»­ vi (láº­p lÃ¡ sá»‘)\n4. `lib/features/ai_conversation/` - Chatbot (Ä‘Ã£ cÃ³ check)\n5. `lib/features/home/presentation/pages/home_page.dart` - Trang chá»§ hiá»ƒn thá»‹ badges\n\n## CÃ¡ch thá»±c hiá»‡n\n\n### 1. Äáº£m báº£o cÃ¡c tÃ­nh nÄƒng FREE khÃ´ng check credit\nKiá»ƒm tra vÃ  remove credit check (náº¿u cÃ³) trong:\n- Face analysis flow\n- Palm analysis flow\n- Tu Vi chart creation\n\n### 2. Hiá»ƒn thá»‹ labels trÃªn UI\nThÃªm badge/label Ä‘á»ƒ user biáº¿t tÃ­nh nÄƒng nÃ o free/paid:\n```dart\n// TrÃªn card tÃ­nh nÄƒng\nStack(\n  children: [\n    FeatureCard(...),\n    Positioned(\n      top: 8,\n      right: 8,\n      child: Container(\n        padding: EdgeInsets.symmetric(horizontal: 8, vertical: 4),\n        decoration: BoxDecoration(\n          color: isPaid ? AppColors.warning : AppColors.success,\n          borderRadius: BorderRadius.circular(12),\n        ),\n        child: Text(\n          isPaid ? 'ğŸ’ Premium' : 'âœ¨ Miá»…n phÃ­',\n          style: TextStyle(fontSize: 10, fontWeight: FontWeight.bold),\n        ),\n      ),\n    ),\n  ],\n)\n```\n\n### 3. Update home page shortcuts\nTrong home_page.dart, 4 shortcuts (Face, Palm, Chatbot, History):\n- Face: Hiá»ƒn thá»‹ Miá»…n phÃ­ \n- Palm: Hiá»ƒn thá»‹ Miá»…n phÃ­\n- Chatbot: Hiá»ƒn thá»‹ Premium hoáº·c sá»‘ credit cÃ²n láº¡i\n- History: KhÃ´ng cáº§n label\n\n### 4. Update Tu Vi banner\n- Láº­p lÃ¡ sá»‘: FREE\n- Há»i chatbot vá» lÃ¡ sá»‘: PAID (Ä‘Ã£ cÃ³ button Gáº·p Chatbot trong tu_vi_result_page)\n\n## Verification\n- Test Face/Palm khÃ´ng bá»‹ block khi háº¿t credit\n- Test Chatbot bá»‹ block khi háº¿t credit\n- Kiá»ƒm tra UI labels hiá»ƒn thá»‹ Ä‘Ãºng","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T18:02:43.8093484+07:00","updated_at":"2025-12-09T18:12:55.136671+07:00","closed_at":"2025-12-09T18:12:55.136671+07:00"}
